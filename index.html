<!DOCTYPE html>
<html>
<head>
    
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>    
    <script type="text/javascript" src="frontendScript.js"></script>
    
</head>
<body>
    <form id="babgne" action="">
        <input id="input" type="text", placeholder="input your todo">
        <button id="button">Submit</button>
    </form>

    <ul id="list">

    </ul>
</body>

<script>


var list = (result) => {
    return `<li>${result}</li>`;
} 

var zaven = (root, component)=>{
    root.innerHTML = component;
}
var ul = document.getElementById('list');

var toDo = (todo) => {
    let html = "";
    todo.forEach(task => {
        html += list(task) 
    });

    return html;
}
 
$(document).ready(function(){

    const reqUrl = "/api/todos";
    const reqConf = {
        method: 'GET'
    };

    fetch(reqUrl, reqConf).then(result => {return result.json()}) 
    .then(result => { 
        zaven(ul, toDo(result));
        
    })
    .catch(function(error) {
        alert(error.toString())
    });   
        

    $('#button').click(function(){
        const element = $('#input').val();
        fetch("/api/todos", {
            method: "POST",
            body: JSON.stringify(element)
        }).then(result => {return result.json()}) 
    .then(result => { 
        zaven(ul, toDo(result));
        
    })
    .catch(function(error) {
        alert(error.toString())
    });   
    })
    
});

</script>

</html>